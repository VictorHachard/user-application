<div *ngFor="let response of alertManagerManager.responseList">
  <div class="alert {{ response.alert }}" role="alert">
    {{ response.message }}
  </div>
</div>

<h3 class="pb-2 border-bottom">Emails</h3>

<div class="list-group mb-3">
  <div *ngFor="let email of user.emailList" href="#" class="list-group-item">
    <div class="d-flex w-100 justify-content-between">
      <p>{{email.email}} -
        <span class="{{email.priority === 'PRINCIPAL' ? 'text-primary' : 'text-secondary'}}">{{email.priority | titlecase}}</span>
      </p>
      <button type="button" (click)="removeEmail(email.id!)" *ngIf="email.priority !== 'PRINCIPAL'" class="btn btn-sm btn-danger">Remove</button>
    </div>
    <ul>
      <li *ngIf="email.confirmed"><p class="text-success">Confirmed</p></li>
      <li *ngIf="!email.confirmed"><p class="text-danger d-inline">Not confirmed</p>, <a type="button" class="text-primary" (click)="resendEmail(email.id!)">resend confirmation email</a></li>
    </ul>
  </div>
</div>

<form class="mb-3" [formGroup]="addEmailForm" (ngSubmit)="addEmail()">
  <div class="mb-3">
    <label class="form-label">Add email address</label>
    <input type="text" formControlName="email" class="form-control">
  </div>
  <button type="submit" [disabled]="addEmailForm.invalid" class="btn btn-sm btn-primary">Add email</button>
</form>

<form class="mb-3" *ngIf="_reload" [formGroup]="primaryEmailForm">
  <div class="mb-3">
    <label class="form-label">Primary email address</label>
    <select formControlName="email" class="form-select" (ngModelChange)="primaryEmail($event)">
      <option *ngFor="let email of user.emailList" value="{{email.email}}">{{email.email}}</option>
    </select>
  </div>
</form>

<form class="mb-3" *ngIf="_reload" [formGroup]="backupEmailForm">
  <div class="mb-3">
    <label class="form-label">Backup email address</label>
    <p>Your backup email address will be used as an additional destination for security-relevant account notifications and can also be used for password resets.</p>
    <select formControlName="email" class="form-select" (ngModelChange)="backupEmail($event)">
      <option value="ALL">Allow all verified emails</option>
      <option value="ALL">Only allow primary email</option>
      <option *ngFor="let email of user.emailList" value="{{email.email}}">{{email.email}}</option>
    </select>
  </div>
</form>

<h3 class="pb-2 border-bottom">Email preferences</h3>

<form class="mb-3" [formGroup]="emailPreference" *ngIf="emailPreference">
  <div class="form-check">
    <input class="form-check-input" formControlName="preference" [value]="'ALL'" (click)="preferences('ALL')" type="radio" >
    <label class="form-check-label">Receive all emails</label>
  </div>
  <div class="form-check">
    <input class="form-check-input" formControlName="preference" [value]="'ONLY_ACCOUNT'" (click)="preferences('ONLY_ACCOUNT')" type="radio">
    <label class="form-check-label">Only receive account related emails</label>
  </div>
</form>
